@(course: Course, data: CourseworkAPI)(implicit request: RequestHeader, flash: Flash)

@colColor(status: String) = @{
  if (status == "Pass") {
    "table-success"
  } else {
    "table-danger"
  }
}

@main(course.title) {
<h1>@course.title</h1>
<a class="btn btn-outline-primary btn-sm"
   href="@routes.CourseworkController.newImport(course.id)">Import
   Coursework</a>

<table class="table table-bordered table-sm">
  <thead>
    <tr>
      <th>Name</th>
      @for(d <- data.courseworks) {
      <th class="text-center">@d._1 (@{f"${d._2}%1.0f"} %)</th>
      }
      <th class="text-center">Total
        (@{ f"${data.total}%1.0f" } %)
      </th>
      <th class="text-center">Status</th>
    </tr>
  </thead>
  <tbody>
    @for(d <- data.courseworkDetails) {
    <tr>
      <td>
        <a href="@routes.StudentController.show(d.student.id)">
          @d.student.name
        </a>
      </td>
      @for(c <- data.courseworks.toList) {
      <td class="text-center">
        @d.courseworks.get(c._1)
      </td>
      }
      <td class="text-center">@d.total</td>
      <td class="text-center @colColor(d.status)">@d.status</td>
    </tr>
    }
    <tr class="text-center">
      <td></td>
      @for((_, v) <- data.statistic.averages) {
      <td>
        <strong>Average: </strong>
        @{f"$v%1.1f"}
      </td>
      }
      <td>
        <strong>Pass / Fail: </strong>
        @data.statistic.passCount / @data.statistic.failCount
      </td>
    </tr>
  </tbody>
</table>
}

